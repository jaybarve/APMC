<!DOCTYPE html>
<html lang="mr">
<head>
  <title>‡§∂‡•á‡§§‡§ï‡§∞‡•Ä ‡§§‡§™‡§∂‡•Ä‡§≤</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body style="margin:0; font-family:Arial, sans-serif; background:#f4f6f8;">

<!-- Header -->
<div style="
  background:#2e7d32;
  color:white;
  padding:16px;
  text-align:center;
  font-size:22px;
">
  ‡§∂‡•á‡§§‡§ï‡§∞‡•Ä ‡§§‡§™‡§∂‡•Ä‡§≤
</div>

<!-- Table -->
<div style="padding:15px;">
  <div style="
    background:white;
    border-radius:12px;
    padding:10px;
    box-shadow:0 4px 12px rgba(0,0,0,0.15);
    overflow-x:auto;
  ">

    <table style="width:100%; border-collapse:collapse; min-width:850px;">
      <thead>
        <tr style="background:#f0f0f0;">
          <th>‡§∂‡•á‡§§‡§ï‡§∞‡•Ä ‡§®‡§æ‡§µ</th>
          <th>‡§µ‡§ï‡•ç‡§ï‡§≤ ‡§®‡§Ç</th>
          <th>‡§µ‡§ú‡§®</th>
          <th>‡§¶‡§∞</th>
          <th>‡§ñ‡§∞‡•á‡§¶‡•Ä‡§¶‡§æ‡§∞ ‡§®‡§æ‡§µ</th>
          <th>‡§ñ‡§∞‡•á‡§¶‡•Ä‡§¶‡§æ‡§∞ ‡§¶‡§∞</th>
        </tr>
      </thead>

      <tbody id="farmerTable"></tbody>
    </table>

  </div>
</div>

<!-- DATABASE -->
<script src="data.js"></script>

<script>
const params = new URLSearchParams(window.location.search);
const traderId = parseInt(params.get("id"));

const trader = kandaDatabase.find(t => t.traderId === traderId);
const table = document.getElementById("farmerTable");

trader.farmers.forEach(farmer => {
  const entryCount = farmer.entries.length;

  farmer.entries.forEach((entry, index) => {
    let row = "<tr>";

    // Farmer name only once
    if (index === 0) {
      row += `
        <td style="padding:10px; font-weight:bold;" rowspan="${entryCount}">
          ${farmer.farmerName}
        </td>
      `;
    }

    row += `
      <td style="padding:10px; text-align:center;">${entry.vakkalNo}</td>
      <td style="padding:10px; text-align:center;">${entry.weight}</td>
      <td style="padding:10px; text-align:center;">${entry.rate}</td>
      <td style="padding:10px;">${entry.buyerName}</td>
      <td style="padding:10px; text-align:center;">${entry.buyerRate}</td>
    `;

    row += "</tr>";
    table.innerHTML += row;
  });

  /* üîπ Line after each farmer */
  table.innerHTML += `
    <tr>
      <td colspan="6" style="
        padding:0;
        border-bottom:3px solid #2e7d32;
      "></td>
    </tr>
  `;
});
</script>

</body>
</html>
